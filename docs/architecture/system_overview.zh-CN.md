# ArcticOwl 架构概览（简体中文）

本文档概述 ArcticOwl 的核心设计思路，便于读者在不翻阅源代码的情况下理解关键模块的职责和交互过程。

## 核心处理管线

1. **采集（Capture）** — `src/core/video_capture.cpp` 启动后台线程，从本地设备、RTSP 或 RTMP 流中读取帧。为了保持 UI 响应性，帧会以最小缓存形式通过 `frameReady` 信号投递至 Qt 主线程。
2. **处理（Processing）** — `src/core/video_processor.cpp` 接收原始帧，执行运动、入侵、火焰检测。其中，运动检测结合 MOG2 与 KNN 背景差分以稳定掩膜；入侵检测复用运动结果并限制在预设区域内；火焰检测综合颜色、纹理、形状特征进行判断。
3. **呈现与告警（Presentation & Alerts）** — `src/modules/ui/main_window.cpp` 负责在界面中绘制标注帧、提供检测开关，并通过定时器模拟告警。若启用网络广播，处理后的帧会同步推送给已连接的客户端。

## 网络分发层

`src/modules/network/network_server.cpp` 基于 Boost.Asio 实现轻量级 TCP 服务器，可接受多个客户端连接，持续推送 JPEG 帧与告警文本。实现细节包括异步读取校验与对客户端列表的互斥保护。

## UI 职责分布

Qt 主窗口主要负责：
- 生命周期管理（`startSystem` / `stopSystem`）；
- 配置对话框（首选项、关于）；
- 连接采集、处理、网络模块；
- 通过计时器模拟告警更新。

将这些说明移出头文件，可以保持代码简洁同时保留设计背景。

## 配置选项

当前运行时配置包括：
- 采集源（本地摄像头、RTSP、RTMP）；
- 网络端口；
- 告警刷新间隔。

后续扩展时应遵循现有模式：在首选项中暴露新选项，必要时持久化，并在下次启动时应用。

## 后续规划

- 自定义入侵区域与网络吞吐调优仍在 v0.1.2 的后续计划中；
- 考虑引入配置持久化及网络协议详细说明，以提升可维护性。
